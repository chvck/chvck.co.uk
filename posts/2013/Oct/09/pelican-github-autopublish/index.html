<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

  <meta name="description" content="Personal blog site for chvck covering a range of topics but mostly bikes. chvck likes bikes." />
  <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  
  <title>Pelican Github Autopublish</title>
  <link href="http://chvck.co.uk/theme/css/reset.css" rel="stylesheet" type="text/css" media="screen" />
  <link href="http://chvck.co.uk/theme/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="screen" />
  <link href="http://chvck.co.uk/theme/css/style.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="http://chvck.co.uk/feeds/all.rss" type="application/rss+xml" rel="alternate" title="chvck.co.uk RSS Feed" />
    
  <!--[if IE]>
    <style type="text/css"> 
    . twoColFixRtHdr #mainContent { zoom: 1; }
    </style>
  <![endif]-->

</head>

<body>
  <div class="container">
  
    <header>
      <h1><a href="http://chvck.co.uk">chvck.co.uk</a></h1>
<h2>Pointless, sometimes amusing and deeply, deeply uninteresting to 99.72998% of the population</h2>    </header>

    <nav>
    </nav>
    <aside>
        
      <a href="http://chvck.co.uk/categories.html"><h3>Categories</h3></a>
        <ul>
            <li><a href="http://chvck.co.uk/category/development.html">Development</a></li>
            <li><a href="http://chvck.co.uk/category/fettling.html">Fettling</a></li>
            <li><a href="http://chvck.co.uk/category/multiple-sclerosis.html">Multiple-Sclerosis</a></li>
            <li><a href="http://chvck.co.uk/category/photo-a-day.html">Photo-a-Day</a></li>
            <li><a href="http://chvck.co.uk/category/random.html">Random</a></li>
            <li><a href="http://chvck.co.uk/category/review.html">Review</a></li>
            <li><a href="http://chvck.co.uk/category/riding.html">Riding</a></li>
            <a class="more" href="http://chvck.co.uk/categories.html">View more...</a>
        </ul>

        <h3>Links</h3>
        <ul>
            <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
            <li><a href="http://jinja.pocoo.org">Jinja2</a></li>
            <li><a href="http://hatteamcreator.co.uk/">Hat Team Creator</a></li>
            <li><a href="http://27smiles.com">27 Smiles</a></li>
            <li><a href="http://ghickman.co.uk">ghickman.co.uk</a></li>
            <li><a href="http://www.sadedixon.co.uk">sadedixon.co.uk</a></li>
            <li><a href="http://lambdafive.co.uk/">lambdafive.co.uk</a></li>
        </ul>

        <a href="http://chvck.co.uk/tags.html"><h3>Tags</h3></a>
        <ul>
              <li class="tag tag-4"><a href="/tag/pelican.html">pelican</a></li>
              <li class="tag tag-4"><a href="/tag/hackday.html">hackday</a></li>
              <li class="tag tag-4"><a href="/tag/alps.html">alps</a></li>
              <li class="tag tag-4"><a href="/tag/clarach.html">clarach</a></li>
              <li class="tag tag-3"><a href="/tag/boozing.html">boozing</a></li>
              <li class="tag tag-3"><a href="/tag/dev.html">dev</a></li>
              <li class="tag tag-1"><a href="/tag/bikes.html">bikes</a></li>
              <li class="tag tag-2"><a href="/tag/nant-y-arian.html">nant-y-arian</a></li>
              <li class="tag tag-4"><a href="/tag/rough-ride-guide.html">rough-ride-guide</a></li>
              <li class="tag tag-4"><a href="/tag/photo-a-day-2013.html">photo-a-day-2013</a></li>
              <li class="tag tag-4"><a href="/tag/ultimate.html">ultimate</a></li>
              <li class="tag tag-4"><a href="/tag/ridgeway.html">ridgeway</a></li>
              <li class="tag tag-4"><a href="/tag/dyfi.html">dyfi</a></li>
              <li class="tag tag-4"><a href="/tag/wales.html">wales</a></li>
              <li class="tag tag-4"><a href="/tag/eastridge.html">eastridge</a></li>
              <li class="tag tag-1"><a href="/tag/riding.html">riding</a></li>
              <li class="tag tag-3"><a href="/tag/chilterns.html">chilterns</a></li>
              <li class="tag tag-2"><a href="/tag/random.html">random</a></li>
              <li class="tag tag-4"><a href="/tag/javascript.html">javascript</a></li>
              <li class="tag tag-4"><a href="/tag/ms.html">ms</a></li>
              <li class="tag tag-1"><a href="/tag/photo-a-day.html">photo-a-day</a></li>
              <li class="tag tag-4"><a href="/tag/trails.html">trails</a></li>
              <li class="tag tag-4"><a href="/tag/bike-maintenance.html">bike-maintenance</a></li>
        </ul>
        <br style="clear: both"/>
        
        <ul class="socials">
                <li><a href="http://www.twitter.com/chvck"><img class="social" src="http://chvck.co.uk/theme/images/twitter.png" alt="Twitter" ></a></li>
                <li><a href="https://github.com/chvck"><img class="social" src="http://chvck.co.uk/theme/images/github.png" alt="Github" ></a></li>
                <li><a href="http://chvck.co.uk/feeds/all.rss" rel="alternate"><img class="social" src="http://chvck.co.uk/theme/images/RSS_icon.svg" alt="Flex Rss" ></a></li>
        </ul>

    </aside><!-- end #sidebar -->
  
    <div id="mainContent">
      
      
 

  <article class="post">
    <h2><a href="http://chvck.co.uk/posts/2013/Oct/09/pelican-github-autopublish/">Pelican Github Autopublish</a></h2>
    <h3>Posted on 09 Oct 2013</h3>
        
      <p>This isn't strictly development but could be handy for someone. </p>
<p>This blog uses a piece of software called <a href="http://docs.getpelican.com/">Pelican</a>, if you hadn't
guessed. Pelican is a static blog generator, this means that it takes a theme (some
HTMl like templates and some css), blog posts (mine are written in <a href="http://daringfireball.net/projects/markdown/">markdown</a>)
and some settings and it creates a static html output ready to be hosted somewhere.</p>
<p>For the hosting I use <a href="http://pages.github.com/">Github pages</a>, mostly because I already
use github and it means that hosting is free. I'm a huge fan of free. These two marry
together quite nicely.</p>
<p>To do the publish I use <a href="https://github.com/davisp/ghp-import">ghp-import</a> and just push to my
gh-pages branch. <a href="http://docs.getpelican.com/en/3.3.0/tips.html#publishing-to-github">The pelican docs actually describe how to set this up</a>.
I use the post-commit hook approach and it's brilliant. BUT I don't want to have to run this stuff everytime,
I have to ssh into my server and then do a git add and commit. This is where my autopublish process comes in.</p>
<p>The first step that I did was to move my blog post folder to dropbox and create a link within my blog folder to that.
This means I can write posts anywhere so long as I can upload to dropbox and it'll be visible to pelican to do it's
magic. </p>
<p>The next step I thought I would do is just to add some form of watcher for git so that when content in the source
folder changes it'd add and commit and hey presto the hook would do the rest. Git doesn't follow links. That's that one dead then.
However, Pelican has a --autoreload option so that you can leave it running and it'll auto regenerate the output
whenever it detects a change, OK so I'll use that. Next I changed my post-commit hook so that it'd only run ghp-import
and do the push to gh-pages, not create the content. I downloaded <a href="https://github.com/nevik/gitwatch">Gitwatch</a> and ran it
to look at my blog folder (not the source folder, the whole thing). Final step, I setup ssh-agent so that I wouldn't
have to supply password each time git tried to do a push.</p>
<p>This means that I now stick a file in my github folder, pelican picks that up and regenerates the output, gitwatch picks up
the new output and does an add and a commit firing the post-commit hook. The hook runs ghp-import and pushes to gh-pages. Hey presto,
my new post is on my blog!</p>	
  <a href="http://twitter.com/share" class="twitter-share-button"
     data-count="horizontal" data-via="chvck">Tweet</a>
  <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
        
      <h3 class="blogMeta">Posted in: <a href="http://chvck.co.uk/category/development.html">Development</a>
        | Tags :
           <span><a href="http://chvck.co.uk/tag/pelican.html">pelican</a> / </span>
           <span><a href="http://chvck.co.uk/tag/dev.html">dev</a> / </span>
      </h3>
      
  </article>
  
    <article>
        
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
      <script type="text/javascript">
         var disqus_identifier = "posts/2013/Oct/09/pelican-github-autopublish/";
         (function () {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://chvck.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      
    </article>
				
    
    </div><!-- end #mainContent -->
  
  <div class="clearfloat"></div>
  
    <footer>
      <p>Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
    </footer><!-- end #footer -->
  
  </div><!-- end #container -->
</body>
</html>